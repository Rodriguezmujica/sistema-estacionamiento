â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  GUÃA DE INSTALACIÃ“N PASO A PASO - Servicio de ImpresiÃ³n Star BSC10
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PASO 1: INSTALAR NODE.JS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Ir a https://nodejs.org/
2. Descargar versiÃ³n LTS (recomendada)
3. Ejecutar instalador con opciones por defecto
4. Verificar instalaciÃ³n abriendo CMD o PowerShell:
   
   node --version
   npm --version

   DeberÃ­as ver algo como: v20.x.x y 10.x.x


PASO 2: INSTALAR DRIVER DE IMPRESORA
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Conectar impresora Star BSC10 vÃ­a USB
2. Descargar driver desde:
   https://www.starmicronics.com/support/downloads.aspx
3. Buscar "BSC10" en la pÃ¡gina
4. Instalar driver segÃºn tu sistema operativo
5. Verificar en "Panel de Control > Dispositivos e Impresoras"
   que aparezca la impresora


PASO 3: COPIAR CARPETA print-service
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Copiar toda la carpeta "print-service" a la PC de producciÃ³n
2. UbicaciÃ³n recomendada: C:\PrintService
3. La estructura debe quedar:
   
   C:\PrintService\
   â”œâ”€â”€ server.js
   â”œâ”€â”€ package.json
   â”œâ”€â”€ install-service.js
   â”œâ”€â”€ uninstall-service.js
   â”œâ”€â”€ test-print.js
   â””â”€â”€ README.md


PASO 4: INSTALAR DEPENDENCIAS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Abrir PowerShell o CMD como Administrador
2. Navegar a la carpeta:
   
   cd C:\PrintService

3. Instalar dependencias:
   
   npm install

4. Esperar a que termine (puede tomar unos minutos)


PASO 5: PROBAR EL SERVICIO MANUALMENTE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. En la misma ventana, ejecutar:
   
   npm start

2. DeberÃ­as ver:
   
   ğŸš€ Servicio de ImpresiÃ³n iniciado
   ğŸ“ Escuchando en http://localhost:3000
   âœ… Servidor corriendo...

3. Abrir OTRA ventana de PowerShell/CMD
4. Ejecutar prueba:
   
   npm test

5. Si todo estÃ¡ bien, deberÃ­a imprimir un ticket de prueba
6. Presionar Ctrl+C en la primera ventana para detener


PASO 6: INSTALAR COMO SERVICIO DE WINDOWS (OPCIONAL PERO RECOMENDADO)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Instalar node-windows globalmente:
   
   npm install -g node-windows
   npm link node-windows

2. Instalar el servicio (como Administrador):
   
   node install-service.js

3. El servicio se instalarÃ¡ y arrancarÃ¡ automÃ¡ticamente
4. Para verificar:
   - Presionar Win+R
   - Escribir: services.msc
   - Buscar: "PrintServiceEstacionamiento"
   - Debe estar "En ejecuciÃ³n"


PASO 7: CONFIGURAR INICIO AUTOMÃTICO
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Si instalaste como servicio de Windows:
1. Abrir services.msc
2. Doble clic en "PrintServiceEstacionamiento"
3. Tipo de inicio: "AutomÃ¡tico"
4. Aplicar y Aceptar

Ahora el servicio arrancarÃ¡ automÃ¡ticamente cuando inicie Windows.


PASO 8: INTEGRAR CON TU SISTEMA WEB
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
En tus archivos JavaScript, agregar esta funciÃ³n:

async function imprimirTicketLocal(tipo, datos) {
    try {
        const response = await fetch('http://localhost:3000/print', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ tipo, datos })
        });
        
        const result = await response.json();
        
        if (result.success) {
            alert('Ticket impreso correctamente');
        } else {
            alert('Error al imprimir: ' + result.message);
        }
    } catch (error) {
        alert('No se pudo conectar al servicio de impresiÃ³n');
    }
}

// Ejemplo de uso al registrar ingreso:
imprimirTicketLocal('ingreso', {
    ticket_id: ticketId,
    patente: patente,
    tipo_vehiculo: tipoVehiculo,
    fecha_ingreso: fecha,
    hora_ingreso: hora
});


VERIFICACIÃ“N FINAL
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ“ Node.js instalado
âœ“ Driver de impresora instalado
âœ“ Impresora conectada y encendida
âœ“ Carpeta print-service copiada
âœ“ Dependencias instaladas (npm install)
âœ“ Servicio funcionando (npm start o instalado como servicio)
âœ“ Prueba exitosa (npm test imprimiÃ³ ticket)
âœ“ Sistema web integrado


COMANDOS ÃšTILES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Iniciar manualmente:
  npm start

Probar impresiÃ³n:
  npm test

Instalar como servicio:
  node install-service.js

Desinstalar servicio:
  node uninstall-service.js

Ver impresoras conectadas:
  curl http://localhost:3000/printers

Verificar estado:
  curl http://localhost:3000/


SOLUCIÃ“N DE PROBLEMAS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âš  "Impresora no detectada"
â†’ Verificar driver instalado
â†’ Desconectar y reconectar USB
â†’ Verificar en Administrador de dispositivos

âš  "Puerto 3000 en uso"
â†’ Cambiar puerto en server.js (const PORT = 3001)

âš  "Error LIBUSB_ERROR_ACCESS"
â†’ Ejecutar como Administrador
â†’ O instalar como servicio de Windows

âš  "Cannot find module"
â†’ Ejecutar: npm install


SOPORTE TÃ‰CNICO
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Si tienes problemas, revisar:
1. Logs del servicio (si estÃ¡ instalado):
   C:\ProgramData\node-windows\PrintServiceEstacionamiento\

2. Ejecutar modo debug:
   npm run dev

3. Verificar conectividad:
   curl http://localhost:3000/


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                        Â¡INSTALACIÃ“N COMPLETA!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

